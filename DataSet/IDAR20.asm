

;
; ÉÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
; º	This file is generated by The Interactive Disassembler (IDA)	    º
; º	Copyright (c) 2003 by DataRescue sa/nv,	<ida@datarescue.com>	    º
; º Licensed to: Mark Stamp, San Jose State University,	1 user,	academic, 11/2003 º
; ÈÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼
;
; File Name   :	C:\Documents and Settings\Fiona\My Documents\CS	298_Metamorphic	virus\HMM\Cygwin\gm.exe
; Format      :	Portable executable for	IBM PC (PE)
; Imagebase   :	400000
; Section 1. (virtual address 00001000)
; Virtual size			: 00001234 (   4660.)
; Section size in file		: 00001400 (   5120.)
; Offset to raw	data for section: 00000400
; Flags	60000060: Text Data Executable Readable
; Alignment	: 16 bytes ?

		model flat

; ÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 401000h
		assume es:nothing, ss:nothing, ds:_data, fs:nothing, gs:nothing

; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U B	R O U T	I N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ

; Attributes: bp-based frame

		public start
start		proc near

var_8		= dword	ptr -8
var_2		= word ptr -2

		push	ebp
		mov	ebp, esp
		sub	esp, 8
		and	esp, 0FFFFFFF0h
		mov	eax, ds:dword_404000
		test	eax, eax
		jz	short loc_401013
		int	3		; Trap to Debugger

loc_401013:				; CODE XREF: start+10j
		fnstcw	[ebp+var_2]
		movzx	eax, [ebp+var_2]
		and	eax, 0FFFFF0C0h
		mov	[ebp+var_2], ax
		movzx	eax, [ebp+var_2]
		or	eax, 33Fh
		mov	[ebp+var_2], ax
		fldcw	[ebp+var_2]
		mov	[esp+8+var_8], offset sub_401460
		call	sub_401E90
		mov	esp, ebp
		pop	ebp
		retn
start		endp

; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 10h

loc_401050:				; CODE XREF: .text:00402214j
		push	ebp
		mov	ebp, esp
		pop	ebp
		jmp	loc_401BF0
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 8
aVersionPrintVe	db '-version             print version information',0
					; DATA XREF: .data:00403000o
aRrrrrrrrrrrrrr	db 'animate [options]    run the "animate" util'
		db 'ity',0
aRrrrrrrrrrrr_0	db 'composite [options]  run the "composite" ut'
		db 'ility',0
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		jmp	short loc_401120
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 10h

loc_401120:				; CODE XREF: .text:00401111j
					; DATA XREF: .data:0040300Co
		arpl	[edi+6Eh], bp
		push	75h
		jb	short near ptr loc_401189+3
		and	[ebx+6Fh], bl
		jo	short loc_4011A0
		imul	ebp, [edi+6Eh],	20205D73h
		and	[eax], ah
		jb	short loc_4011AC
		outsb
		and	[eax+ebp*2+65h], dh
		and	[edx], ah
		arpl	[edi+6Eh], bp
		push	75h
		jb	short loc_4011AA
		and	ah, [eax]
		jnz	short near ptr loc_4011BC+1
		imul	ebp, [ecx+ebp*2+74h], 90900079h
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop

loc_401160:				; DATA XREF: .data:00403010o
		arpl	[edi+6Eh], bp
		jbe	short near ptr loc_4011C9+1
		jb	short loc_4011DB
		and	[ebx+6Fh], bl
		jo	short loc_4011E0
		imul	ebp, [edi+6Eh],	20205D73h
		and	[eax], ah
		jb	short near ptr loc_4011EB+1
		outsb
		and	[eax+ebp*2+65h], dh
		and	[edx], ah
		arpl	[edi+6Eh], bp
		jbe	short loc_4011E8
		jb	short near ptr loc_4011F8+1
		and	ah, [eax]
		jnz	short near ptr loc_4011FC+1

loc_401189:				; CODE XREF: .text:00401125j
		imul	ebp, [ecx+ebp*2+74h], 90900079h
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop

loc_4011A0:				; CODE XREF: .text:0040112Aj
					; DATA XREF: .data:00403014o
		imul	esi, fs:[ebx+70h], 2079616Ch
		pop	ebx
		outsd

loc_4011AA:				; CODE XREF: .text:00401143j
		jo	short loc_401220

loc_4011AC:				; CODE XREF: .text:00401135j
		imul	ebp, [edi+6Eh],	20205D73h
		and	[eax], ah
		jb	short near ptr loc_40122B+1
		outsb
		and	[eax+ebp*2+65h], dh

loc_4011BC:				; CODE XREF: .text:00401147j
		and	[edx], ah
		imul	esi, fs:[ebx+70h], 2279616Ch
		and	[ebp+74h], dh

loc_4011C9:				; CODE XREF: .text:00401163j
		imul	ebp, [ecx+ebp*2+74h], 90900079h
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop

loc_4011DB:				; CODE XREF: .text:00401165j
		nop
		nop
		nop
		nop
		nop

loc_4011E0:				; CODE XREF: .text:0040116Aj
					; DATA XREF: .data:00403018o
		imul	esp, [ebp+6Eh],	79666974h

loc_4011E8:				; CODE XREF: .text:00401181j
		and	[ebx+6Fh], bl

loc_4011EB:				; CODE XREF: .text:00401175j
		jo	short loc_401261
		imul	ebp, [edi+6Eh],	20205D73h
		and	[edx+75h], dh
		outsb

loc_4011F8:				; CODE XREF: .text:00401183j
		and	[eax+ebp*2+65h], dh

loc_4011FC:				; CODE XREF: .text:00401187j
		and	[edx], ah
		imul	esp, [ebp+6Eh],	79666974h
		and	ah, [eax]
		jnz	short loc_40127E
		imul	ebp, [ecx+ebp*2+74h], 90900079h
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop

loc_401220:				; CODE XREF: .text:004011AAj
					; DATA XREF: .data:0040301Co
		imul	ebp, [ebp+70h],	2074726Fh
		pop	ebx
		outsd
		jo	short loc_40129F

loc_40122B:				; CODE XREF: .text:004011B5j
		imul	ebp, [edi+6Eh],	20205D73h
		and	[eax], ah
		and	[edx+75h], dh
		outsb
		and	[eax+ebp*2+65h], dh
		and	[edx], ah
		imul	ebp, [ebp+70h],	2274726Fh
		and	[ebp+74h], dh
		imul	ebp, [ecx+ebp*2+74h], 90900079h
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop

loc_401260:				; DATA XREF: .data:00403020o
		ins	dword ptr es:[edi], dx

loc_401261:				; CODE XREF: .text:004011EBj
		outsd
		db	67h
		jb	near ptr 12CEh
		db	66h
		jns	short near ptr loc_401286+2
		pop	ebx
		outsd
		jo	short near ptr aVersion_1024s+11h
		imul	ebp, [edi+6Eh],	20205D73h
		and	[eax], ah
		jb	short near ptr aCopyright_1024+0Bh
		outsb
		and	[eax+ebp*2+65h], dh
		and	[edx], ah

loc_40127E:				; CODE XREF: .text:00401208j
		ins	dword ptr es:[edi], dx
		outsd
		db	67h
		jb	near ptr 12ECh
		db	66h
		jns	short near ptr loc_4012A5+3

loc_401286:				; CODE XREF: .text:00401265j
		and	[ebp+74h], dh
		imul	ebp, [ecx+ebp*2+74h], 90900079h
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop

loc_40129F:				; CODE XREF: .text:00401229j
		nop

loc_4012A0:				; DATA XREF: .data:00403024o
		ins	dword ptr es:[edi], dx
		outsd
		outsb
		jz	short near ptr aUsage_1024sCom+6

loc_4012A5:				; CODE XREF: .text:00401283j
		and	gs:[bp+di+6Fh],	bl
		jo	short near ptr aUsage_1024sCom+20h
		imul	ebp, [edi+6Eh],	20205D73h
		and	[eax], ah
		jb	short near ptr aWhereOptionsIn+6
		outsb
		and	[eax+ebp*2+65h], dh
		and	[edx], ah
		ins	dword ptr es:[edi], dx
		outsd
		outsb
		jz	short near ptr aUsage_1024sCom+24h
		and	ah, gs:[bx+si]
		jnz	short near ptr aWhereOptionsIn+17h
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		db  69h	; i
aLity		db 'lity',0
aVersion_1024s	db 'Version: %.1024s',0Ah,0 ; DATA XREF: sub_401350+1Co
					; sub_401460+517o
aCopyright_1024	db 'Copyright: %.1024s',0Ah ; CODE XREF: .text:00401275j
					; DATA XREF: sub_401350+31o ...
		db 0Ah,0
		align 10h
aUsage_1024sCom	db 'Usage: %.1024s command [options ...]',0Ah,0 ; CODE XREF: .text:004012A3j
					; DATA XREF: sub_401350+4Do
aWhereOptionsIn	db 0Ah			; CODE XREF: .text:004012B5j
					; DATA XREF: sub_401350+59o
		db 'Where options include: ',0
a_1024s		db '  %.1024s',0Ah,0    ; DATA XREF: sub_401350+77o
		align 8

; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U B	R O U T	I N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ

; Attributes: bp-based frame

sub_401350	proc near		; CODE XREF: sub_401460+43p
					; sub_401460+40Dp ...

var_18		= dword	ptr -18h
var_14		= dword	ptr -14h

		push	ebp
		mov	ebp, esp
		push	ebx
		sub	esp, 14h
		mov	ebx, offset off_403000
		mov	[esp+18h+var_18], 0
		call	GetMagickVersion
		mov	[esp+18h+var_14], eax
		mov	[esp+18h+var_18], offset aVersion_1024s	; "Version: %.1024s\n"
		call	printf
		call	GetMagickCopyright
		mov	[esp+18h+var_14], eax
		mov	[esp+18h+var_18], offset aCopyright_1024 ; "Copyright: %.1024s\n\n"
		call	printf
		mov	[esp+18h+var_18], 0
		call	SetClientName
		mov	[esp+18h+var_14], eax
		mov	[esp+18h+var_18], offset aUsage_1024sCom ; "Usage: %.1024s command [options ...]\n"
		call	printf
		mov	[esp+18h+var_18], offset aWhereOptionsIn ; "\nWhere options include: "
		call	puts
		mov	eax, off_403000
		test	eax, eax
		jz	short loc_4013D9
		mov	esi, esi

loc_4013C0:				; CODE XREF: sub_401350+87j
		mov	[esp+18h+var_14], eax
		add	ebx, 4
		mov	[esp+18h+var_18], offset a_1024s ; "  %.1024s\n"
		call	printf
		mov	eax, [ebx]
		test	eax, eax
		jnz	short loc_4013C0

loc_4013D9:				; CODE XREF: sub_401350+6Cj
		add	esp, 14h
		pop	ebx
		pop	ebp
		retn
sub_401350	endp

; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
aAnimate	db 'animate',0          ; DATA XREF: sub_401460+7Eo
					; sub_401460+92o ...
aComposite	db 'composite',0        ; DATA XREF: sub_401460+10Bo
					; sub_401460+11Fo ...
aConjure	db 'conjure',0          ; DATA XREF: sub_401460+169o
					; sub_401460+17Do ...
aConvert	db 'convert',0          ; DATA XREF: sub_401460+1B4o
					; sub_401460+1C8o ...
aDisplay	db 'display',0          ; DATA XREF: sub_401460+212o
					; sub_401460+226o ...
aIdentify	db 'identify',0         ; DATA XREF: sub_401460+25Do
					; sub_401460+271o ...
aImport		db 'import',0           ; DATA XREF: sub_401460+30Ao
					; sub_401460+31Eo ...
aMogrify	db 'mogrify',0          ; DATA XREF: sub_401460+355o
					; sub_401460+369o ...
aMontage	db 'montage',0          ; DATA XREF: sub_401460+3B3o
					; sub_401460+3C7o ...
aVersion	db 'version',0          ; DATA XREF: sub_401460+440o
aDebug		db 'debug',0            ; DATA XREF: sub_401460+45Fo
aHelp		db 'help',0             ; DATA XREF: sub_401460+479o
a?		db '?',0                ; DATA XREF: sub_401460+48Do
aNone		db 'None',0             ; DATA XREF: sub_401460+4B3o
aMissingeventma	db 'MissingEventMask',0 ; DATA XREF: sub_401460+4E5o
		align 10h

; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U B	R O U T	I N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ

; Attributes: bp-based frame

sub_401460	proc near		; DATA XREF: start+33o

var_58		= dword	ptr -58h
var_54		= dword	ptr -54h
var_50		= dword	ptr -50h
var_4C		= dword	ptr -4Ch
var_48		= dword	ptr -48h
var_30		= dword	ptr -30h
var_2C		= dword	ptr -2Ch
var_28		= dword	ptr -28h
var_20		= dword	ptr -20h
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		xor	eax, eax
		mov	ebp, esp
		push	edi
		push	esi
		push	ebx
		sub	esp, 4Ch
		mov	ebx, 1
		and	esp, 0FFFFFFF0h
		call	sub_401E60
		call	__main
		mov	[ebp+var_30], 1
		mov	edx, [ebp+arg_4]
		mov	eax, [edx]
		mov	[esp+58h+var_58], eax
		call	InitializeMagick
		mov	eax, [ebp+arg_0]
		cmp	[ebp+var_30], eax
		jl	loc_401877

loc_40149D:				; CODE XREF: sub_401460+439j
					; sub_401460+4C2j ...
		cmp	[ebp+arg_0], 1
		jg	short loc_4014B9
		call	sub_401350
		call	DestroyMagick
		mov	[esp+58h+var_58], 1

loc_4014B4:				; CODE XREF: sub_401460+F5j
					; sub_401460+4AEj
		call	exit

loc_4014B9:				; CODE XREF: sub_401460+41j
		dec	[ebp+arg_0]
		lea	eax, [ebp+var_28]
		add	[ebp+arg_4], 4
		mov	[esp+58h+var_58], eax
		call	GetExceptionInfo
		mov	[esp+58h+var_58], 0
		call	CloneImageInfo
		mov	edx, [ebp+arg_4]
		mov	edi, eax
		mov	esi, [edx]
		mov	[esp+58h+var_58], offset aAnimate ; "animate"
		mov	[esp+58h+var_54], esi
		call	LocaleCompare
		test	eax, eax
		jz	short loc_401509
		mov	[esp+58h+var_58], offset aAnimate ; "animate"
		lea	ebx, [esi+1]
		mov	[esp+58h+var_54], ebx
		call	LocaleCompare
		test	eax, eax
		jnz	short loc_401567

loc_401509:				; CODE XREF: sub_401460+90j
		mov	[esp+58h+var_58], offset aAnimate ; "animate"
		call	SetClientName
		mov	eax, [ebp+arg_4]
		mov	edx, [ebp+arg_0]
		mov	[esp+58h+var_54], eax
		mov	[esp+58h+var_58], edx
		call	AnimateImageCommand

loc_401527:				; CODE XREF: sub_401460+160j
					; sub_401460+1ABj ...
		mov	[ebp+var_30], eax

loc_40152A:				; CODE XREF: sub_401460+2C4j
					; sub_401460+301j ...
		mov	eax, [ebp+var_20]
		test	eax, eax
		jnz	short loc_40155A

loc_401531:				; CODE XREF: sub_401460+105j
		mov	[esp+58h+var_58], edi
		call	DestroyImageInfo
		lea	eax, [ebp+var_28]
		mov	[esp+58h+var_58], eax
		call	DestroyExceptionInfo
		call	DestroyMagick
		xor	eax, eax
		cmp	[ebp+var_30], 0
		setz	al
		mov	[esp+58h+var_58], eax
		jmp	loc_4014B4
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

loc_40155A:				; CODE XREF: sub_401460+CFj
		lea	edx, [ebp+var_28]
		mov	[esp+58h+var_58], edx
		call	CatchException
		jmp	short loc_401531
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

loc_401567:				; CODE XREF: sub_401460+A7j
		mov	[esp+58h+var_54], esi
		mov	[esp+58h+var_58], offset aComposite ; "composite"
		call	LocaleCompare
		test	eax, eax
		jz	short loc_40158F
		mov	[esp+58h+var_54], ebx
		mov	[esp+58h+var_58], offset aComposite ; "composite"
		call	LocaleCompare
		test	eax, eax
		jnz	short loc_4015C5

loc_40158F:				; CODE XREF: sub_401460+119j
		mov	[esp+58h+var_58], offset aComposite ; "composite"
		call	SetClientName
		mov	[esp+58h+var_4C], 0
		lea	eax, [ebp+var_28]
		mov	edx, [ebp+arg_4]
		mov	[esp+58h+var_48], eax
		mov	eax, [ebp+arg_0]
		mov	[esp+58h+var_50], edx
		mov	[esp+58h+var_58], edi
		mov	[esp+58h+var_54], eax
		call	CompositeImageCommand
		jmp	loc_401527
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

loc_4015C5:				; CODE XREF: sub_401460+12Dj
		mov	[esp+58h+var_54], esi
		mov	[esp+58h+var_58], offset aConjure ; "conjure"
		call	LocaleCompare
		test	eax, eax
		jz	short loc_4015ED
		mov	[esp+58h+var_54], ebx
		mov	[esp+58h+var_58], offset aConjure ; "conjure"
		call	LocaleCompare
		test	eax, eax
		jnz	short loc_401610

loc_4015ED:				; CODE XREF: sub_401460+177j
		mov	[esp+58h+var_58], offset aConjure ; "conjure"
		call	SetClientName
		mov	edx, [ebp+arg_4]
		mov	eax, [ebp+arg_0]
		mov	[esp+58h+var_54], edx
		mov	[esp+58h+var_58], eax
		call	ConjureImageCommand
		jmp	loc_401527
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

loc_401610:				; CODE XREF: sub_401460+18Bj
		mov	[esp+58h+var_54], esi
		mov	[esp+58h+var_58], offset aConvert ; "convert"
		call	LocaleCompare
		test	eax, eax
		jz	short loc_401638
		mov	[esp+58h+var_54], ebx
		mov	[esp+58h+var_58], offset aConvert ; "convert"
		call	LocaleCompare
		test	eax, eax
		jnz	short loc_40166E

loc_401638:				; CODE XREF: sub_401460+1C2j
		mov	[esp+58h+var_58], offset aConvert ; "convert"
		call	SetClientName
		mov	[esp+58h+var_4C], 0
		lea	edx, [ebp+var_28]
		mov	eax, [ebp+arg_4]
		mov	[esp+58h+var_48], edx
		mov	edx, [ebp+arg_0]
		mov	[esp+58h+var_50], eax
		mov	[esp+58h+var_58], edi
		mov	[esp+58h+var_54], edx
		call	ConvertImageCommand
		jmp	loc_401527
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

loc_40166E:				; CODE XREF: sub_401460+1D6j
		mov	[esp+58h+var_54], esi
		mov	[esp+58h+var_58], offset aDisplay ; "display"
		call	LocaleCompare
		test	eax, eax
		jz	short loc_401696
		mov	[esp+58h+var_54], ebx
		mov	[esp+58h+var_58], offset aDisplay ; "display"
		call	LocaleCompare
		test	eax, eax
		jnz	short loc_4016B9

loc_401696:				; CODE XREF: sub_401460+220j
		mov	[esp+58h+var_58], offset aDisplay ; "display"
		call	SetClientName
		mov	eax, [ebp+arg_4]
		mov	edx, [ebp+arg_0]
		mov	[esp+58h+var_54], eax
		mov	[esp+58h+var_58], edx
		call	DisplayImageCommand
		jmp	loc_401527
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

loc_4016B9:				; CODE XREF: sub_401460+234j
		mov	[esp+58h+var_54], esi
		mov	[esp+58h+var_58], offset aIdentify ; "identify"
		call	LocaleCompare
		test	eax, eax
		jz	short loc_4016E5
		mov	[esp+58h+var_54], ebx
		mov	[esp+58h+var_58], offset aIdentify ; "identify"
		call	LocaleCompare
		test	eax, eax
		jnz	loc_401766

loc_4016E5:				; CODE XREF: sub_401460+26Bj
		mov	[esp+58h+var_58], offset aIdentify ; "identify"
		lea	ebx, [ebp+var_2C]
		call	SetClientName
		mov	[ebp+var_2C], 0
		lea	eax, [ebp+var_28]
		mov	edx, [ebp+arg_4]
		mov	[esp+58h+var_48], eax
		mov	eax, [ebp+arg_0]
		mov	[esp+58h+var_50], edx
		mov	[esp+58h+var_4C], ebx
		mov	[esp+58h+var_54], eax
		mov	[esp+58h+var_58], edi
		call	IdentifyImageCommand
		mov	[ebp+var_30], eax
		mov	edx, [ebp+var_2C]
		test	edx, edx
		jz	loc_40152A
		call	__getreent
		mov	eax, [eax+8]
		mov	[esp+58h+var_54], eax
		mov	eax, [ebp+var_2C]
		mov	[esp+58h+var_58], eax
		call	fputs
		call	__getreent
		mov	eax, [eax+8]
		mov	[esp+58h+var_58], 0Ah
		mov	[esp+58h+var_54], eax
		call	fputc
		mov	[esp+58h+var_58], ebx
		call	LiberateMemory
		jmp	loc_40152A
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

loc_401766:				; CODE XREF: sub_401460+27Fj
		mov	[esp+58h+var_54], esi
		mov	[esp+58h+var_58], offset aImport ; "import"
		call	LocaleCompare
		test	eax, eax
		jz	short loc_40178E
		mov	[esp+58h+var_54], ebx
		mov	[esp+58h+var_58], offset aImport ; "import"
		call	LocaleCompare
		test	eax, eax
		jnz	short loc_4017B1

loc_40178E:				; CODE XREF: sub_401460+318j
		mov	[esp+58h+var_58], offset aImport ; "import"
		call	SetClientName
		mov	edx, [ebp+arg_4]
		mov	eax, [ebp+arg_0]
		mov	[esp+58h+var_54], edx
		mov	[esp+58h+var_58], eax
		call	ImportImageCommand
		jmp	loc_401527
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

loc_4017B1:				; CODE XREF: sub_401460+32Cj
		mov	[esp+58h+var_54], esi
		mov	[esp+58h+var_58], offset aMogrify ; "mogrify"
		call	LocaleCompare
		test	eax, eax
		jz	short loc_4017D9
		mov	[esp+58h+var_54], ebx
		mov	[esp+58h+var_58], offset aMogrify ; "mogrify"
		call	LocaleCompare
		test	eax, eax
		jnz	short loc_40180F

loc_4017D9:				; CODE XREF: sub_401460+363j
		mov	[esp+58h+var_58], offset aMogrify ; "mogrify"
		call	SetClientName
		mov	[esp+58h+var_4C], 0
		lea	edx, [ebp+var_28]
		mov	eax, [ebp+arg_4]
		mov	[esp+58h+var_48], edx
		mov	edx, [ebp+arg_0]
		mov	[esp+58h+var_50], eax
		mov	[esp+58h+var_58], edi
		mov	[esp+58h+var_54], edx
		call	MogrifyImageCommand
		jmp	loc_401527
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

loc_40180F:				; CODE XREF: sub_401460+377j
		mov	[esp+58h+var_54], esi
		mov	[esp+58h+var_58], offset aMontage ; "montage"
		call	LocaleCompare
		test	eax, eax
		jz	short loc_401837
		mov	[esp+58h+var_54], ebx
		mov	[esp+58h+var_58], offset aMontage ; "montage"
		call	LocaleCompare
		test	eax, eax
		jnz	short loc_40186D

loc_401837:				; CODE XREF: sub_401460+3C1j
		mov	[esp+58h+var_58], offset aMontage ; "montage"
		call	SetClientName
		mov	[esp+58h+var_4C], 0
		lea	eax, [ebp+var_28]
		mov	edx, [ebp+arg_4]
		mov	[esp+58h+var_48], eax
		mov	eax, [ebp+arg_0]
		mov	[esp+58h+var_50], edx
		mov	[esp+58h+var_58], edi
		mov	[esp+58h+var_54], eax
		call	MontageImageCommand
		jmp	loc_401527
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

loc_40186D:				; CODE XREF: sub_401460+3D5j
		call	sub_401350
		jmp	loc_40152A
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

loc_401877:				; CODE XREF: sub_401460+37j
					; sub_401460+437j
		mov	edx, [ebp+arg_4]
		mov	esi, [edx+ebx*4]
		mov	[esp+58h+var_58], esi
		call	strlen
		dec	eax
		jz	short loc_401893
		movzx	eax, byte ptr [esi]
		cmp	al, 2Dh
		jz	short loc_4018A0
		cmp	al, 2Bh
		jz	short loc_4018A0

loc_401893:				; CODE XREF: sub_401460+426j
					; sub_401460+473j ...
		inc	ebx
		cmp	ebx, [ebp+arg_0]
		jl	short loc_401877
		jmp	loc_40149D
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 4

loc_4018A0:				; CODE XREF: sub_401460+42Dj
					; sub_401460+431j
		mov	[esp+58h+var_58], offset aVersion ; "version"
		lea	edi, [esi+1]
		mov	[esp+58h+var_54], edi
		call	LocaleCompare
		test	eax, eax
		jz	loc_401960
		mov	[esp+58h+var_54], edi
		mov	[esp+58h+var_58], offset aDebug	; "debug"
		call	LocaleCompare
		test	eax, eax
		jz	short loc_401913
		cmp	[ebp+arg_0], 2
		jg	short loc_401893
		mov	[esp+58h+var_54], edi
		mov	[esp+58h+var_58], offset aHelp ; "help"
		call	LocaleCompare
		test	eax, eax
		jz	short loc_4018FD
		mov	[esp+58h+var_54], edi
		mov	[esp+58h+var_58], offset a? ; "?"
		call	LocaleCompare
		test	eax, eax
		jnz	short loc_401893

loc_4018FD:				; CODE XREF: sub_401460+487j
		call	sub_401350

loc_401902:				; CODE XREF: sub_401460+54Dj
		call	DestroyMagick
		mov	[esp+58h+var_58], 0
		jmp	loc_4014B4
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

loc_401913:				; CODE XREF: sub_401460+46Dj
		mov	[esp+58h+var_58], offset aNone ; "None"
		call	SetLogEventMask
		cmp	byte ptr [esi],	2Dh
		jnz	loc_40149D
		inc	ebx
		cmp	ebx, [ebp+arg_0]
		jz	short loc_401941

loc_40192E:				; CODE XREF: sub_401460+4F9j
		mov	edx, [ebp+arg_4]
		mov	eax, [edx+ebx*4]
		mov	[esp+58h+var_58], eax
		call	SetLogEventMask
		jmp	loc_40149D
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

loc_401941:				; CODE XREF: sub_401460+4CCj
		mov	[esp+58h+var_50], esi
		mov	[esp+58h+var_54], offset aMissingeventma ; "MissingEventMask"
		mov	[esp+58h+var_58], 2C6h
		call	MagickFatalError
		jmp	short loc_40192E
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 8

loc_401960:				; CODE XREF: sub_401460+455j
		mov	[esp+58h+var_58], 0
		call	GetMagickVersion
		mov	ebx, eax
		call	__getreent
		mov	[esp+58h+var_50], ebx
		mov	[esp+58h+var_54], offset aVersion_1024s	; "Version: %.1024s\n"
		mov	eax, [eax+8]
		mov	[esp+58h+var_58], eax
		call	fprintf
		call	GetMagickCopyright
		mov	ebx, eax
		call	__getreent
		mov	[esp+58h+var_50], ebx
		mov	[esp+58h+var_54], offset aCopyright_1024 ; "Copyright: %.1024s\n\n"
		mov	eax, [eax+8]
		mov	[esp+58h+var_58], eax
		call	fprintf
		jmp	loc_401902
sub_401460	endp

; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION DestroyExceptionInfo. PRESS KEYPAD "+" TO	EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION DestroyImageInfo.	PRESS KEYPAD "+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION CatchException. PRESS KEYPAD "+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION MontageImageCommand. PRESS KEYPAD	"+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION MogrifyImageCommand. PRESS KEYPAD	"+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION ImportImageCommand. PRESS	KEYPAD "+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION LiberateMemory. PRESS KEYPAD "+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION IdentifyImageCommand. PRESS KEYPAD "+" TO	EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION DisplayImageCommand. PRESS KEYPAD	"+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION ConvertImageCommand. PRESS KEYPAD	"+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION ConjureImageCommand. PRESS KEYPAD	"+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION CompositeImageCommand. PRESS KEYPAD "+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION AnimateImageCommand. PRESS KEYPAD	"+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION CloneImageInfo. PRESS KEYPAD "+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION GetExceptionInfo.	PRESS KEYPAD "+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION MagickFatalError.	PRESS KEYPAD "+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION SetLogEventMask. PRESS KEYPAD "+"	TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION DestroyMagick. PRESS KEYPAD "+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION LocaleCompare. PRESS KEYPAD "+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION InitializeMagick.	PRESS KEYPAD "+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION SetClientName. PRESS KEYPAD "+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION GetMagickCopyright. PRESS	KEYPAD "+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION GetMagickVersion.	PRESS KEYPAD "+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION __getreent. PRESS	KEYPAD "+" TO EXPAND]
		align 10h
aLibgccw32EhSjl	db '-LIBGCCW32-EH-SJLJ-GTHR-CYGWIN',0 ; DATA XREF: .text:00401C11o
					; sub_401D30+32o
		align 4

; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U B	R O U T	I N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ

; Attributes: bp-based frame

sub_401B60	proc near		; DATA XREF: sub_401B80+3Do
		push	ebp
		mov	ebp, esp
		sub	esp, 8
		mov	eax, ds:dword_404040
		call	dword ptr [eax+4]
		mov	esp, ebp
		pop	ebp
		retn
sub_401B60	endp

; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 10h

; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U B	R O U T	I N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ

; Attributes: bp-based frame

sub_401B80	proc near		; CODE XREF: .text:00401C9Fp

var_8		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= dword	ptr  8

		push	ebp
		xor	eax, eax
		mov	ebp, esp
		cld
		sub	esp, 8
		mov	ecx, 0Ch
		mov	[esp+8+var_8], ebx
		mov	ebx, [ebp+arg_0]
		mov	[esp+8+var_4], edi
		mov	edi, ebx
		rep stosd
		mov	dword ptr [ebx], 30h
		mov	eax, dword_403040
		mov	dword ptr [ebx+24h], 0FFFFFFFFh
		mov	dword ptr [ebx+4], offset abort
		mov	[ebx+14h], eax
		mov	eax, ds:dword_404010
		mov	dword ptr [ebx+8], offset sub_401B60
		mov	edx, dword_403048
		mov	dword ptr [ebx+1Ch], 0
		mov	[ebx+20h], eax
		mov	eax, dword_403044
		mov	[ebx+2Ch], edx
		mov	[ebx+28h], eax
		mov	ebx, [esp+8+var_8]
		mov	edi, [esp+8+var_4]
		mov	esp, ebp
		pop	ebp
		retn
sub_401B80	endp

; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 8

loc_401BF0:				; CODE XREF: .text:00401054j
		push	ebp
		mov	ebp, esp
		sub	esp, 58h
		mov	[ebp-8], esi
		mov	eax, ds:dword_404040
		mov	[ebp-4], edi
		test	eax, eax
		jz	short loc_401C10

loc_401C05:				; CODE XREF: .text:00401CE6j
		mov	esi, [ebp-8]
		mov	edi, [ebp-4]
		mov	esp, ebp
		pop	ebp
		retn
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 4

loc_401C10:				; CODE XREF: .text:00401C03j
		cld
		mov	esi, offset aLibgccw32EhSjl ; "-LIBGCCW32-EH-SJLJ-GTHR-CYGWIN"
		mov	dword ptr [ebp-48h], 41414141h
		lea	edi, [ebp-28h]
		mov	ecx, 7
		mov	dword ptr [ebp-44h], 41414141h
		mov	dword ptr [ebp-40h], 41414141h
		mov	dword ptr [ebp-3Ch], 41414141h
		mov	dword ptr [ebp-38h], 41414141h
		mov	dword ptr [ebp-34h], 41414141h
		mov	dword ptr [ebp-30h], 41414141h
		mov	dword ptr [ebp-2Ch], 41414141h
		movzx	eax, word ptr ds:aLibgccw32EhSjl+1Ch
		rep movsd
		mov	[edi], ax
		movzx	eax, byte ptr ds:aLibgccw32EhSjl+1Eh
		mov	[edi+2], al
		lea	edi, [ebp-48h]
		mov	[esp], edi
		call	FindAtomA
		movzx	eax, ax
		sub	esp, 4
		test	ax, ax
		jnz	loc_401D10
		mov	dword ptr [esp], 30h
		call	malloc
		test	eax, eax
		mov	esi, eax
		jz	loc_401D1C
		mov	[esp], eax
		call	sub_401B80
		mov	[esp], esi
		call	sub_401D30
		test	ax, ax
		jz	short loc_401CEB
		mov	dword ptr [esp+8], offset sub_401E30
		mov	dword ptr [esp+4], 0
		mov	dword ptr [esp], 0
		call	pthread_atfork
		lea	esi, [esi+0]

loc_401CD0:				; CODE XREF: .text:00401D1Aj
		mov	ds:dword_404040, esi
		lea	eax, [esi+4]
		mov	ds:dword_404030, eax
		lea	eax, [esi+8]
		mov	ds:dword_404050, eax
		jmp	loc_401C05
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

loc_401CEB:				; CODE XREF: .text:00401CAFj
		mov	[esp], esi
		call	free
		mov	[esp], edi
		call	FindAtomA
		sub	esp, 4
		movzx	eax, ax
		jmp	short loc_401D10
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 10h

loc_401D10:				; CODE XREF: .text:00401C80j
					; .text:00401D01j
		mov	[esp], eax
		call	sub_401DC0
		mov	esi, eax
		jmp	short loc_401CD0
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

loc_401D1C:				; CODE XREF: .text:00401C96j
		call	abort
		jmp	short sub_401D30
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 10h

; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U B	R O U T	I N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ

; Attributes: bp-based frame

sub_401D30	proc near		; CODE XREF: .text:00401CA7p
					; .text:00401D21j ...

var_68		= dword	ptr -68h
var_58		= dword	ptr -58h
var_38		= dword	ptr -38h
var_C		= dword	ptr -0Ch
arg_0		= dword	ptr  8

		push	ebp
		mov	eax, 1Fh
		mov	ebp, esp
		push	edi
		mov	edx, 1
		push	esi
		push	ebx
		sub	esp, 5Ch	; lpString
		mov	ebx, [ebp+arg_0]
		lea	esi, [esi+0]
		lea	edi, [edi+0]

loc_401D50:				; CODE XREF: sub_401D30+2Fj
		test	edx, ebx
		mov	cl, 41h
		jnz	short loc_401D58
		mov	cl, 61h

loc_401D58:				; CODE XREF: sub_401D30+24j
		mov	[eax+ebp-58h], cl
		add	edx, edx
		dec	eax
		jns	short loc_401D50
		cld
		mov	esi, offset aLibgccw32EhSjl ; "-LIBGCCW32-EH-SJLJ-GTHR-CYGWIN"
		lea	edi, [ebp+var_38]
		movzx	eax, word ptr ds:aLibgccw32EhSjl+1Ch
		mov	ecx, 7
		rep movsd
		mov	[edi], ax
		movzx	eax, byte ptr ds:aLibgccw32EhSjl+1Eh
		mov	[edi+2], al
		lea	eax, [ebp+var_58]
		mov	[esp+68h+var_68], eax
		call	AddAtomA
		movzx	esi, ax
		sub	esp, 4
		test	si, si
		jnz	short loc_401DA7

loc_401D9B:				; CODE XREF: sub_401D30+83j
		xor	edx, edx

loc_401D9D:				; CODE XREF: sub_401D30+85j
		lea	esp, [ebp+var_C]
		mov	eax, edx
		pop	ebx
		pop	esi
		pop	edi
		pop	ebp
		retn
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

loc_401DA7:				; CODE XREF: sub_401D30+69j
		mov	[esp+68h+var_68], esi
		call	sub_401DC0
		cmp	eax, ebx
		mov	edx, esi
		jnz	short loc_401D9B
		jmp	short loc_401D9D
sub_401D30	endp

; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 10h

; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U B	R O U T	I N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ

; Attributes: bp-based frame

sub_401DC0	proc near		; CODE XREF: .text:00401D13p
					; sub_401D30+7Ap

var_58		= dword	ptr -58h
var_54		= dword	ptr -54h
var_50		= dword	ptr -50h
var_48		= dword	ptr -48h
var_4		= dword	ptr -4
arg_0		= word ptr  8

		push	ebp
		mov	ebp, esp
		lea	edx, [ebp+var_48]
		push	ebx
		sub	esp, 54h	; nAtom
		xor	ebx, ebx
		movzx	eax, [ebp+arg_0]
		mov	[esp+58h+var_50], 3Fh
		mov	[esp+58h+var_54], edx
		mov	[esp+58h+var_58], eax
		call	GetAtomNameA
		sub	esp, 0Ch
		test	eax, eax
		jz	short loc_401E1C
		mov	eax, 1Fh
		mov	edx, 1
		lea	esi, [esi+0]
		lea	edi, [edi+0]

loc_401E00:				; CODE XREF: sub_401DC0+4Aj
		cmp	byte ptr [eax+ebp-48h],	41h
		jz	short loc_401E18

loc_401E07:				; CODE XREF: sub_401DC0+5Aj
		add	edx, edx
		dec	eax
		jns	short loc_401E00
		cmp	dword ptr [ebx], 30h
		jnz	short loc_401E1C
		mov	eax, ebx
		mov	ebx, [ebp+var_4]
		leave
		retn
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

loc_401E18:				; CODE XREF: sub_401DC0+45j
		or	ebx, edx
		jmp	short loc_401E07
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

loc_401E1C:				; CODE XREF: sub_401DC0+29j
					; sub_401DC0+4Fj
		call	abort
		jmp	short sub_401E30
sub_401DC0	endp

; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 10h

; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U B	R O U T	I N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ

; Attributes: bp-based frame

sub_401E30	proc near		; CODE XREF: sub_401DC0+61j
					; DATA XREF: .text:00401CB1o

var_8		= dword	ptr -8

		push	ebp
		mov	ebp, esp
		sub	esp, 8
		mov	eax, ds:dword_404040
		mov	[esp+8+var_8], eax
		call	sub_401D30
		test	ax, ax
		jz	short loc_401E4C
		mov	esp, ebp
		pop	ebp
		retn
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

loc_401E4C:				; CODE XREF: sub_401E30+16j
		call	abort
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
sub_401E30	endp


; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U B	R O U T	I N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ


sub_401E60	proc near		; CODE XREF: sub_401460+13p
		push	ecx
		mov	ecx, esp
		add	ecx, 8

loc_401E66:				; CODE XREF: sub_401E60+1Bj
		cmp	eax, 1000h
		jb	short loc_401E7D
		sub	ecx, 1000h
		or	dword ptr [ecx], 0
		sub	eax, 1000h
		jmp	short loc_401E66
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

loc_401E7D:				; CODE XREF: sub_401E60+Bj
		sub	ecx, eax
		or	dword ptr [ecx], 0
		mov	eax, esp
		mov	esp, ecx
		mov	ecx, [eax]
		mov	eax, [eax+4]
		jmp	eax
sub_401E60	endp

; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 4

; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U B	R O U T	I N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ

; Attributes: bp-based frame

sub_401E90	proc near		; CODE XREF: start+3Ap

var_C8		= dword	ptr -0C8h
var_C4		= dword	ptr -0C4h
var_C0		= dword	ptr -0C0h
var_18		= dword	ptr -18h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= dword	ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 18h
		mov	[ebp+var_4], esi
		mov	esi, [ebp+arg_0]
		mov	[ebp+var_8], ebx
		mov	[esp+18h+var_14], 0
		mov	[esp+18h+var_18], esi
		call	sub_401FB0
		sub	esp, 8
		test	eax, eax
		jz	short loc_401EC3
		mov	[esp+18h+var_18], 0

loc_401EBD:				; CODE XREF: sub_401E90+57j
		call	ds:dll_crt0__FP11per_process ; dll_crt0(per_process *)

loc_401EC3:				; CODE XREF: sub_401E90+24j
		sub	esp, 0B0h
		lea	ebx, [esp+0C8h+var_C0]
		mov	[esp+0C8h+var_C0], 0
		mov	[esp+0C8h+var_C4], ebx
		mov	[esp+0C8h+var_C8], esi
		call	sub_401FB0
		sub	esp, 8
		mov	[esp+0C8h+var_C8], ebx
		jmp	short loc_401EBD
sub_401E90	endp

; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 8
; [00000006 BYTES: COLLAPSED FUNCTION __main. PRESS KEYPAD "+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION fputc. PRESS KEYPAD "+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION fputs. PRESS KEYPAD "+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION exit. PRESS KEYPAD "+" TO	EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION fprintf. PRESS KEYPAD "+"	TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION strlen. PRESS KEYPAD "+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION puts. PRESS KEYPAD "+" TO	EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION printf. PRESS KEYPAD "+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION free. PRESS KEYPAD "+" TO	EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION pthread_atfork. PRESS KEYPAD "+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION malloc. PRESS KEYPAD "+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION abort. PRESS KEYPAD "+" TO EXPAND]
		align 10h

; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U B	R O U T	I N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ

; Attributes: bp-based frame

sub_401FB0	proc near		; CODE XREF: sub_401E90+1Ap
					; sub_401E90+4Cp

var_8		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		xor	eax, eax
		mov	ebp, esp
		push	ebx
		sub	esp, 4		; lpModuleName
		mov	ebx, [ebp+arg_4]
		test	ebx, ebx
		jz	loc_4020B0

loc_401FC4:				; CODE XREF: sub_401FB0+11Cj
		mov	dword ptr [ebx+4], 0A8h
		xor	ecx, ecx
		mov	edx, 74h
		mov	dword ptr [ebx+8], 3EDh
		test	eax, eax
		mov	dword ptr [ebx+0Ch], 0Ah
		mov	[ebx+80h], ecx
		mov	[ebx+84h], edx
		mov	dword ptr [ebx+2Ch], offset dword_402220
		mov	dword ptr [ebx+30h], offset dword_40222C
		mov	dword ptr [ebx+14h], offset unk_404020
		jz	loc_4020A4
		mov	eax, [ebx+0A4h]
		mov	ds:dword_404024, eax

loc_402014:				; CODE XREF: sub_401FB0+FBj
		mov	dword ptr [ebx+78h], 0
		mov	eax, [ebp+arg_0]
		mov	dword ptr [ebx+48h], offset sub_4021B0
		mov	dword ptr [ebx+4Ch], offset sub_4021A0
		mov	[ebx+28h], eax
		mov	eax, [ebp+0]
		mov	dword ptr [ebx+50h], offset sub_402190
		mov	dword ptr [ebx+54h], offset sub_402180
		mov	dword ptr [ebx+24h], offset unk_404028
		mov	[ebx], eax
		mov	dword ptr [ebx+18h], offset malloc
		mov	dword ptr [ebx+1Ch], offset free
		mov	dword ptr [ebx+20h], offset loc_402170
		mov	dword ptr [ebx+44h], offset loc_402160
		mov	[esp+8+var_8], 0
		call	GetModuleHandleA
		mov	[ebx+7Ch], eax
		sub	esp, 4
		mov	dword ptr [ebx+34h], offset off_403000
		mov	dword ptr [ebx+38h], offset unk_403050
		mov	dword ptr [ebx+3Ch], offset dword_404000
		mov	dword ptr [ebx+40h], 404080h
		call	sub_402130
		mov	eax, 1

loc_40209D:				; CODE XREF: sub_401FB0+113j
		mov	ebx, [ebp+var_4]
		leave
		retn	8
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

loc_4020A4:				; CODE XREF: sub_401FB0+53j
		mov	dword ptr [ebx+10h], offset dword_404024
		jmp	loc_402014
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

loc_4020B0:				; CODE XREF: sub_401FB0+Ej
		mov	[esp+8+var_8], 8
		call	cygwin_internal
		mov	edx, eax
		xor	eax, eax
		cmp	edx, 0FFFFFFFFh
		jz	short loc_40209D
		mov	ebx, edx
		mov	eax, 1
		jmp	loc_401FC4
sub_401FB0	endp

; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 10h
		jmp	ds:dll_crt0__FP11per_process ; dll_crt0(per_process *)
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 10h

; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U B	R O U T	I N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ

; Attributes: bp-based frame

sub_4020F0	proc near		; CODE XREF: sub_402130+1Dp

arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h

		push	ebp
		mov	ebp, esp
		mov	ecx, [ebp+arg_0]
		push	esi
		mov	esi, [ebp+arg_8]
		push	ebx
		mov	ebx, [ebp+arg_4]
		cmp	ecx, ebx
		jnb	short loc_402122
		lea	esi, [esi+0]
		lea	edi, [edi+0]

loc_402110:				; CODE XREF: sub_4020F0+30j
		mov	eax, [ecx+4]
		mov	edx, esi
		add	edx, eax
		mov	eax, [ecx]
		add	ecx, 8
		add	[edx], eax
		cmp	ecx, ebx
		jb	short loc_402110

loc_402122:				; CODE XREF: sub_4020F0+10j
		pop	ebx
		pop	esi
		pop	ebp
		retn
sub_4020F0	endp

; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 10h

; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U B	R O U T	I N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ

; Attributes: bp-based frame

sub_402130	proc near		; CODE XREF: sub_401FB0+E3p

var_18		= dword	ptr -18h
var_14		= dword	ptr -14h
var_10		= dword	ptr -10h

		push	ebp
		mov	ebp, esp
		sub	esp, 18h
		mov	[esp+18h+var_10], 400000h
		mov	[esp+18h+var_14], offset dword_404000
		mov	[esp+18h+var_18], offset dword_404000
		call	sub_4020F0
		mov	esp, ebp
		pop	ebp
		retn
sub_402130	endp

; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 10h

loc_402160:				; DATA XREF: sub_401FB0+AEo
		jmp	ds:calloc
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 10h

loc_402170:				; DATA XREF: sub_401FB0+A7o
		jmp	ds:realloc
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 10h

; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U B	R O U T	I N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ

; Attributes: bp-based frame

sub_402180	proc near		; DATA XREF: sub_401FB0+89o
		push	ebp
		mov	ebp, esp
		pop	ebp
		retn
sub_402180	endp

; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 10h

; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U B	R O U T	I N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ

; Attributes: bp-based frame

sub_402190	proc near		; DATA XREF: sub_401FB0+82o
		push	ebp
		mov	ebp, esp
		pop	ebp
		retn
sub_402190	endp

; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 10h

; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U B	R O U T	I N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ

; Attributes: bp-based frame

sub_4021A0	proc near		; DATA XREF: sub_401FB0+75o
		push	ebp
		mov	ebp, esp
		pop	ebp
		retn
sub_4021A0	endp

; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 10h

; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U B	R O U T	I N E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ

; Attributes: bp-based frame

sub_4021B0	proc near		; DATA XREF: sub_401FB0+6Eo
		push	ebp
		mov	ebp, esp
		pop	ebp
		retn
sub_4021B0	endp

; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION cygwin_internal. PRESS KEYPAD "+"	TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION FindAtomA. PRESS KEYPAD "+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION AddAtomA.	PRESS KEYPAD "+" TO EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION GetAtomNameA. PRESS KEYPAD "+" TO	EXPAND]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION GetModuleHandleA.	PRESS KEYPAD "+" TO EXPAND]
		align 10h
		push	ebp
		mov	ebp, esp
		pop	ebp
		jmp	loc_401050
; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		align 8
dword_402220	dd 0FFFFFFFFh, 402210h,	0 ; DATA XREF: sub_401FB0+3Eo
dword_40222C	dd 0FFFFFFFFh, 74h dup(0) ; DATA XREF: sub_401FB0+45o
_text		ends

; Section 2. (virtual address 00003000)
; Virtual size			: 00000050 (	 80.)
; Section size in file		: 00000200 (	512.)
; Offset to raw	data for section: 00001800
; Flags	C0000040: Data Readable	Writable
; Alignment	: 16 bytes ?
; ÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ

; Segment type:	Pure data
; Segment permissions: Read/Write
_data		segment	para public 'DATA' use32
		assume cs:_data
		;org 403000h
off_403000	dd offset aVersionPrintVe ; DATA XREF: sub_401350+7o
					; sub_401350+65r ...
					; "-version		print version info"...
		dd offset aRrrrrrrrrrrrrr+11h
		dd offset aRrrrrrrrrrrr_0+11h
		dd offset loc_401120
		dd offset loc_401160
		dd offset loc_4011A0
		dd offset loc_4011E0
		dd offset loc_401220
		dd offset loc_401260
		dd offset loc_4012A0
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
dword_403040	dd 14h			; DATA XREF: sub_401B80+22r
dword_403044	dd 14h			; DATA XREF: sub_401B80+54r
dword_403048	dd 0			; DATA XREF: sub_401B80+44r
		db    0	;
		db    0	;
		db    0	;
		db    0	;
unk_403050	db    0	;		; DATA XREF: sub_401FB0+CEo
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
		db    0	;
_data		ends

; Section 3. (virtual address 00004000)
; Virtual size			: 00000080 (	128.)
; Section size in file		: 00000000 (	  0.)
; Offset to raw	data for section: 00000000
; Flags	C0000080: Bss Readable Writable
; Alignment	: 16 bytes ?
; ÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ

; Segment type:	Uninitialized
; Segment permissions: Read/Write
_bss		segment	para public 'BSS' use32
		assume cs:_bss
		;org 404000h
		assume es:nothing, ss:nothing, ds:_data, fs:nothing, gs:nothing
dword_404000	dd ?			; DATA XREF: start+9r sub_401FB0+D5o ...
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
dword_404010	dd ?			; DATA XREF: sub_401B80+38r
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
unk_404020	db    ?	;		; DATA XREF: sub_401FB0+4Co
		db    ?	;
		db    ?	;
		db    ?	;
dword_404024	dd ?			; DATA XREF: sub_401FB0+5Fw
					; sub_401FB0+F4o
unk_404028	db    ?	;		; DATA XREF: sub_401FB0+90o
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
dword_404030	dd ?			; DATA XREF: .text:00401CD9w
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
dword_404040	dd ?			; DATA XREF: sub_401B60+6r
					; .text:00401BF9r ...
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
dword_404050	dd ?			; DATA XREF: .text:00401CE1w
		align 40h
_bss		ends

;
; Imports from cygGraphicsMagick-0
;
; Section 4. (virtual address 00005000)
; Virtual size			: 000005E0 (   1504.)
; Section size in file		: 00000600 (   1536.)
; Offset to raw	data for section: 00001A00
; Flags	C0000040: Data Readable	Writable
; Alignment	: 16 bytes ?
; ÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ

; Segment type:	Externs
; _idata
		extrn __imp_AnimateImageCommand:dword ;	DATA XREF: AnimateImageCommandr
		extrn __imp_CatchException:dword ; DATA	XREF: CatchExceptionr
		extrn __imp_CloneImageInfo:dword ; DATA	XREF: CloneImageInfor
		extrn __imp_CompositeImageCommand:dword	; DATA XREF: CompositeImageCommandr
		extrn __imp_ConjureImageCommand:dword ;	DATA XREF: ConjureImageCommandr
		extrn __imp_ConvertImageCommand:dword ;	DATA XREF: ConvertImageCommandr
		extrn __imp_DestroyExceptionInfo:dword ; DATA XREF: DestroyExceptionInfor
		extrn __imp_DestroyImageInfo:dword ; DATA XREF:	DestroyImageInfor
		extrn __imp_DestroyMagick:dword	; DATA XREF: DestroyMagickr
		extrn __imp_DisplayImageCommand:dword ;	DATA XREF: DisplayImageCommandr
		extrn __imp_GetExceptionInfo:dword ; DATA XREF:	GetExceptionInfor
		extrn __imp_GetMagickCopyright:dword ; DATA XREF: GetMagickCopyrightr
		extrn __imp_GetMagickVersion:dword ; DATA XREF:	GetMagickVersionr
		extrn __imp_IdentifyImageCommand:dword ; DATA XREF: IdentifyImageCommandr
		extrn __imp_ImportImageCommand:dword ; DATA XREF: ImportImageCommandr
		extrn __imp_InitializeMagick:dword ; DATA XREF:	InitializeMagickr
		extrn __imp_LiberateMemory:dword ; DATA	XREF: LiberateMemoryr
		extrn __imp_LocaleCompare:dword	; DATA XREF: LocaleComparer
		extrn __imp_MagickFatalError:dword ; DATA XREF:	MagickFatalErrorr
		extrn __imp_MogrifyImageCommand:dword ;	DATA XREF: MogrifyImageCommandr
		extrn __imp_MontageImageCommand:dword ;	DATA XREF: MontageImageCommandr
		extrn __imp_SetClientName:dword	; DATA XREF: SetClientNamer
		extrn __imp_SetLogEventMask:dword ; DATA XREF: SetLogEventMaskr


;
; Imports from cygwin1
;
		extrn __imp___main:dword ; DATA	XREF: __mainr
; void _imp_abort(void)
		extrn __imp_abort:dword	; DATA XREF: abortr
; void *__cdecl	calloc(size_t,size_t)
		extrn calloc:dword	; DATA XREF: .text:00402160r
		extrn __imp_cygwin_internal:dword ; DATA XREF: cygwin_internalr
; dll_crt0(per_process *)
		extrn dll_crt0__FP11per_process:dword ;	DATA XREF: sub_401E90+2Dr
					; .text:004020E0r
; void __cdecl _imp_exit(int)
		extrn __imp_exit:dword	; DATA XREF: exitr
		extrn __imp_fprintf:dword ; DATA XREF: fprintfr
		extrn __imp_fputc:dword	; DATA XREF: fputcr
		extrn __imp_fputs:dword	; DATA XREF: fputsr
; void __cdecl _imp_free(void *)
		extrn __imp_free:dword	; DATA XREF: freer
; void *__cdecl	_imp_malloc(size_t)
		extrn __imp_malloc:dword ; DATA	XREF: mallocr
		extrn __imp_printf:dword ; DATA	XREF: printfr
		extrn __imp_pthread_atfork:dword ; DATA	XREF: pthread_atforkr
		extrn __imp_puts:dword	; DATA XREF: putsr
; void *__cdecl	realloc(void *,size_t)
		extrn realloc:dword	; DATA XREF: .text:00402170r
; size_t __cdecl _imp_strlen(const char	*)
		extrn __imp_strlen:dword ; DATA	XREF: strlenr

;
; Imports from cygwin1
;
		extrn __imp___getreent:dword ; DATA XREF: __getreentr


;
; Imports from KERNEL32
;
; ATOM __stdcall __imp_AddAtomA(LPCSTR lpString)
		extrn __imp_AddAtomA:dword ; DATA XREF:	AddAtomAr
; ATOM __stdcall __imp_FindAtomA(LPCSTR	lpString)
		extrn __imp_FindAtomA:dword ; DATA XREF: FindAtomAr
; UINT __stdcall __imp_GetAtomNameA(ATOM nAtom,LPSTR lpBuffer,int nSize)
		extrn __imp_GetAtomNameA:dword ; DATA XREF: GetAtomNameAr
; HMODULE __stdcall __imp_GetModuleHandleA(LPCSTR lpModuleName)
		extrn __imp_GetModuleHandleA:dword ; DATA XREF:	GetModuleHandleAr



		end start
